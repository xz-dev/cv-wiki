# xzos.net 博客 - 2024年

> **文章数量**: 4 篇  
> **主题**: Python开发、图像处理、Android、生活

---

## 文章列表

### 1. WebM/WebP to GIF with semi-transparency

**日期**: 2024-09-15  
**URL**: https://xzos.net/blog/webm-webp-to-gif-with-semi-transparency/  
**分类**: 开发/图像处理

#### 摘要

解决 WebM/WebP 转 GIF 时半透明像素的处理问题，开发完整的转换工具。

#### 技术背景

起因: [maunium/stickerpicker#78](https://github.com/maunium/stickerpicker/pull/78) - 添加动画贴纸支持

**问题**: GIF 不支持半透明像素，直接转换会出现白边或像素孔洞

#### 解决方案

**处理流程**: WebM → WebP → GIF

**算法原理**:
1. **二值化分类**: alpha >= 128 → 255 (不透明)，< 128 → 0 (透明)
2. **腐蚀操作 (MinFilter)**: 消除小噪点，收缩边缘
3. **膨胀操作 (MaxFilter)**: 恢复主体，扩展边缘

**核心代码**:
```python
def process_frame(frame):
    frame = frame.convert('RGBA')
    alpha = frame.getchannel('A')
    threshold = 128
    alpha = alpha.point(lambda x: 255 if x >= threshold else 0)
    alpha = alpha.filter(ImageFilter.MinFilter(3))
    alpha = alpha.filter(ImageFilter.MaxFilter(3))
    frame.putalpha(alpha)
    return frame
```

#### 技术深度
- PIL 图像处理
- ffmpeg/ffprobe 视频编解码
- VP8/VP9 编码器处理
- 形态学图像处理（腐蚀/膨胀）

#### 技术标签
`Python` `PIL` `ffmpeg` `图像处理` `WebP` `GIF` `半透明`

---

### 2. Cut and move Runs via python-docx

**日期**: 2024-03-19  
**URL**: https://xzos.net/blog/cut-and-move-runs-via-python-docx/  
**分类**: 开发/Python

#### 摘要

python-docx 库原生不支持 Run 对象的剪切移动，通过阅读源码找到解决方案。

#### 技术发现

**关键发现**:
- 可通过 `paragraph._p` 和 `run._r` 访问 OXML 对象
- 将 `run._r` 添加到其他 `paragraph._p` 时，会自动从原位置移除

**解决代码**:
```python
# 获取下一段落或新建
try:
    next_para = all_para[para_number + 1]
    new_para = next_para.insert_paragraph_before(style=para.style)
except IndexError:
    new_para = para._parent.add_paragraph(para.style)

# 移动 run
run = para.runs[-1]
new_para._p.append(run._r)
```

#### 技术标签
`Python` `python-docx` `OXML` `文档处理`

---

### 3. 如何更新 12306 的铁路e卡通证件信息

**日期**: 2024-02-23  
**URL**: https://xzos.net/blog/update-12306-of-railway-ecard-id-information/  
**分类**: 生活/工具

#### 摘要

记录更新 12306 铁路 e 卡通证件信息的方法。

#### 技术标签
`12306` `实用工具` `生活`

---

### 4. 猫咪发情期 按压尾巴根 / 指压法

**日期**: 2024-09-24  
**URL**: https://xzos.net/blog/cat-estrus-press-the-base-of-the-tail-acupressure/  
**分类**: 生活

#### 摘要

非技术文章，关于宠物护理。

#### 技术标签
`生活` `宠物`

---

## 2024年技术主题

| 主题 | 文章数 | 关键词 |
|------|--------|--------|
| 图像/视频处理 | 1 | WebP、GIF、半透明 |
| Python 开发 | 1 | python-docx、OXML |
| 生活工具 | 2 | 12306、宠物 |

---

**文档版本**: v1.0  
**最后更新**: 2026-02-04
